# Extend the base Windows-native image
FROM africanfuture/windows-devbox-base:latest

# Set PowerShell as default shell
SHELL ["powershell", "-Command"]

# Install development tools
RUN choco install -y --no-progress --timeout 2700 --debug --verbose \
    nodejs-lts \
    python \
    dotnet-sdk \
    golang \
    rust \
    cmake \
    make \
    winrar \
    unzip; \
    if ($LASTEXITCODE -ne 0) { Get-Content C:\ProgramData\chocolatey\logs\chocolatey.log; exit $LASTEXITCODE }; \
    Remove-Item C:\Temp\choco-cache -Recurse -Force -ErrorAction SilentlyContinue

# Default to PowerShell
CMD ["powershell", "-NoExit", "-Command", "$PSVersionTable"]